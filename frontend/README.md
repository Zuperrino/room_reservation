# Frontend - Система бронирования переговорок

Фронтенд-приложение на Next.js с TypeScript для системы бронирования переговорных комнат.

## Технологии

- **Next.js 14** - React фреймворк с App Router
- **TypeScript** - типизация
- **Tailwind CSS** - стилизация
- **Axios** - HTTP клиент для работы с API
- **React DatePicker** - выбор даты и времени

## Установка

1. Перейдите в директорию фронтенда:
   ```bash
   cd frontend
   ```

2. Установите зависимости:
   ```bash
   npm install
   ```

3. Создайте файл `.env.local` в корне директории `frontend/`:
   ```env
   NEXT_PUBLIC_API_URL=http://localhost:8000
   ```

## Запуск

### Режим разработки

```bash
npm run dev
```

Приложение будет доступно по адресу: `http://localhost:3000`

### Сборка для продакшена

```bash
npm run build
npm start
```

## Структура проекта

```
frontend/
├── src/
│   ├── app/                      # Next.js App Router страницы
│   │   ├── layout.tsx           # Корневой layout с AuthProvider
│   │   ├── page.tsx             # Главная страница (список переговорок)
│   │   ├── login/               # Страница входа
│   │   ├── register/            # Страница регистрации
│   │   ├── rooms/[id]/          # Страница переговорки с бронированием
│   │   └── my-reservations/     # Мои бронирования
│   ├── components/              # React компоненты
│   │   ├── auth/               # Компоненты аутентификации
│   │   ├── layout/             # Layout компоненты
│   │   ├── rooms/              # Компоненты переговорок
│   │   └── reservations/       # Компоненты бронирования
│   ├── lib/                    # Утилиты
│   │   ├── api.ts             # API клиент (axios)
│   │   └── auth-context.tsx   # Auth Context
│   └── types/                  # TypeScript типы
│       ├── user.ts
│       ├── room.ts
│       ├── reservation.ts
│       └── auth.ts
├── public/                     # Статические файлы
├── package.json
├── tsconfig.json
├── tailwind.config.ts
└── next.config.js
```

## Основные функции

### Аутентификация
- Регистрация нового пользователя
- Вход в систему
- Автоматическое сохранение JWT токена
- Защищенные маршруты

### Переговорки
- Просмотр списка доступных переговорок
- Просмотр деталей переговорки
- Просмотр предстоящих бронирований для переговорки

### Бронирование
- Создание нового бронирования с выбором даты и времени
- Просмотр своих бронирований
- Отмена бронирования
- Валидация времени бронирования

## API Integration

Приложение взаимодействует с FastAPI бэкендом через следующие эндпоинты:

- `POST /auth/jwt/login` - вход
- `POST /auth/register` - регистрация
- `POST /auth/jwt/logout` - выход
- `GET /users/me` - текущий пользователь
- `GET /meeting_rooms` - список переговорок
- `GET /meeting_rooms/{id}` - детали переговорки
- `GET /meeting_rooms/{id}/reservations` - бронирования переговорки
- `POST /reservations/` - создать бронирование
- `GET /reservations/my_reservations` - мои бронирования
- `DELETE /reservations/{id}` - отменить бронирование

## Переменные окружения

| Переменная | Описание | По умолчанию |
|-----------|----------|--------------|
| `NEXT_PUBLIC_API_URL` | URL бэкенд API | `http://localhost:8000` |

## Разработка

### Добавление новых компонентов

Компоненты размещаются в `src/components/` с разделением по функциональности:
- `auth/` - компоненты аутентификации
- `layout/` - layout компоненты
- `rooms/` - компоненты переговорок
- `reservations/` - компоненты бронирования

### Добавление новых страниц

Страницы создаются в `src/app/` согласно Next.js App Router:
- Создайте папку с именем маршрута
- Добавьте файл `page.tsx`
- Используйте `ProtectedRoute` для защищенных страниц

### Работа с API

API клиент находится в `src/lib/api.ts`. Для добавления новых эндпоинтов:
1. Добавьте типы в `src/types/`
2. Добавьте методы в соответствующий раздел API клиента
3. Используйте в компонентах через `import { api } from '@/lib/api'`

## Troubleshooting

### Ошибка подключения к API
- Убедитесь, что бэкенд запущен на `http://localhost:8000`
- Проверьте переменную окружения `NEXT_PUBLIC_API_URL`

### Проблемы с аутентификацией
- Очистите localStorage в браузере
- Проверьте срок действия JWT токена (по умолчанию 1 час)

### Ошибки при установке зависимостей
- Убедитесь, что используется Node.js версии 18 или выше
- Попробуйте удалить `node_modules` и `package-lock.json`, затем выполните `npm install` заново

